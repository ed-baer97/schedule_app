# Быстрая инструкция по деплою на Render

## Шаги деплоя

1. **Подготовка репозитория**
   ```bash
   git add .
   git commit -m "Prepare for Render deployment"
   git push
   ```

2. **Создание сервиса на Render**
   - Зайдите на [render.com](https://render.com)
   - Нажмите "New +" → "Web Service"
   - Подключите ваш репозиторий (GitHub/GitLab/Bitbucket)

3. **Настройка сервиса**
   - **Name**: `schedule-app` (или любое другое имя)
   - **Environment**: `Python 3`
   - **Python Version**: `3.11.0` (⚠️ ВАЖНО: укажите вручную в настройках!)
   - **Build Command**: `pip install --upgrade pip setuptools wheel && pip install -r requirements.txt`
   - **Start Command**: `gunicorn app:app`
   - **Plan**: `Free` (для начала)
   
   ⚠️ **ВАЖНО**: 
   - В настройках сервиса в разделе "Environment" обязательно укажите **Python Version: 3.11.0**
   - Если Render использует Python 3.13, это может вызвать проблемы с некоторыми пакетами
   - Установка может занять 5-10 минут из-за пакетов `numpy`, `pandas` и `ortools`, которые требуют компиляции. Это нормально!

4. **Переменные окружения**

   Добавьте в разделе "Environment Variables":
   
   **Обязательно:**
   ```
   SECRET_KEY=<сгенерируйте через: python -c "import secrets; print(secrets.token_hex(32))">
   ```
   
   **Рекомендуется:**
   ```
   TELEGRAM_BOT_TOKEN=<ваш токен бота>
   DASHSCOPE_API_KEY=<ваш API ключ Qwen>
   QWEN_MODEL=qwen-plus
   ```

5. **Инициализация БД**

   После первого деплоя:
   - Откройте: `https://your-app.onrender.com/init-db`
   - Создастся первый супер-администратор:
     - Логин: `admin`
     - Пароль: `admin123`
   - ⚠️ **Сразу измените пароль!**

6. **⚠️ ВАЖНО: Хранение данных**

   На Render файловая система эфемерная - данные SQLite теряются при перезапуске!
   
   **Быстрое решение:**
   - Добавьте Render Disk в настройках сервиса
   - Или используйте для тестирования (данные будут теряться)

## Проверка работы

После деплоя проверьте:
- ✅ Приложение запускается без ошибок
- ✅ Страница `/login` открывается
- ✅ Можно войти с учетными данными `admin` / `admin123`
- ✅ После входа открывается панель управления

## Решение проблем

**Render использует Python 3.13 вместо 3.11:**
- ⚠️ Это может вызвать проблемы с установкой пакетов!
- См. подробную инструкцию: `RENDER_SETUP.md`
- Кратко: в настройках сервиса укажите Python Version: `3.11.0`

**Долгая установка зависимостей (5-10 минут):**
- Это нормально! Пакеты `numpy`, `pandas` и `ortools` требуют компиляции
- Процесс может зависнуть на этапе "Preparing metadata (pyproject.toml)" - это нормально
- Подождите завершения установки, не прерывайте процесс

**Приложение не запускается:**
- Проверьте логи в панели Render
- Убедитесь, что все зависимости установлены
- Проверьте переменные окружения
- Убедитесь, что используется Python 3.11 (см. `RENDER_SETUP.md`)

**Ошибка базы данных:**
- Убедитесь, что вызвали `/init-db` после первого деплоя
- Проверьте права на создание файлов

**Данные теряются:**
- Это нормально для SQLite на Render (эфемерная файловая система)
- Используйте Render Disk или PostgreSQL для постоянного хранения

## Дополнительная информация

Подробная документация: см. `README.md`

